{"version":3,"sources":["js/Framework/Dom.js","js/Framework/jsx.js","js/Framework/Component.js","js/Framework/ComponentFactory.js","js/Framework/Template.js","js/Components/SearchBar/SearchBar.js","js/Components/SearchBar/index.js","js/Services/FavoriteService/FavoriteService.js","js/Services/FavoriteService/index.js","js/Components/FavouriteLocations/FavouriteLocations.js","js/Components/FavouriteLocations/index.js","js/Services/WeatherDataService/IWeatherDataService.js","js/api.js","js/Services/WeatherDataService/WeatherDataService.js","js/Services/WeatherDataService/index.js","js/Components/UnitsButton/UnitsButton.js","js/Components/UnitsButton/index.js","js/Components/Header/Header.js","js/Components/Header/index.js","js/formatters.js","js/Components/FavoriteButton/FavoriteButton.js","js/Components/FavoriteButton/index.js","js/Components/CurrentWeather/CurrentWeather.js","js/Components/CurrentWeather/index.js","js/Components/WeatherForecastItem/WeatherForecastItem.js","js/Components/WeatherForecastItem/index.js","js/Components/ForecastItem/ForecastItem.js","js/Components/ForecastItem/index.js","js/Components/WeatherForecast/WeatherForecast.js","js/Components/WeatherForecast/index.js","js/Components/App/App.js","js/Components/App/index.js","js/devHelpers.js","js/index.js"],"names":["TYPE_TEXT_NODE","TYPE_FRAGMENT_NODE","removeClass","dom","classList","remove","blinkHtmlElemen","add","setTimeout","createDomElement","type","document","createTextNode","createDocumentFragment","createElement","updateClassList","Array","isArray","className","attachEvents","eventsList","forEach","evnt","addEventListener","eventType","handler","attachAttributes","attrs","Object","keys","attrKey","setAttribute","removeAttributes","attr","removeAttribute","props","assign","args","children","concat","events","filter","key","startsWith","map","event","substr","toLowerCase","element","tag","createVDom","component","vDom","_vDom","Component","host","state","_rendered","changes","forceRender","beforeRender","content","render","renderChildren","diffChildren","afterRender","components","parentDom","parentVDom","item","renderVdomElement","push","append","newElement","propsKeys","hasOwnProperty","run","newElements","length","cleanDom","childVDom","index","oldElement","splice","nodeValue","diff","value","innerHTML","HTMLElement","htmlElement","ComponentFactory","mappings","register","componentClass","name","get","componentClassName","parse","tpl","re","RegExp","matches","lifo","all","parent","exec","selfClosed","customComponent","charAt","endTag","match","test","pop","findProps","tagEndIndex","startNextTagIndex","indexOf","text","substring","trim","textNode","prop","stringify","ast","fnName","res","parts","propKey","join","findPropsTpl","values","placeholder","shift","parseTpl","buildComponents","parseJSX","strings","fullstr","vars","SearchBar","e","preventDefault","data","FormData","target","handleSearch","handleSearchSubmit","cityName","storageKey","FavoriteService","JSON","localStorage","getItem","val","save","includes","removeCity","addCity","setItem","cb","getData","favoriteService","FavouriteLocations","favorites","onFavoritesUpdate","bind","subscribeForUpdate","setState","localName","button","dataset","city","lenght","buttons","handleFavClick","IWeatherDataService","API_KEY","API_UNITS","API_URL","API_CURRENT","API_FORECAST","fetchData","apiUrl","fetch","then","response","ok","json","catch","fetchCurrentData","units","fetchForecastData","API_UNITS_METRIC","API_UNITS_IMPERIAL","WeatherDataService","dataCurrent","dataForecast","selectedUnit","lastSearch","Promise","cod","dataLoaded","cbCurrent","getCurrentWeather","cbForecast","getWeatherForecast","cbUnitChange","getCurrentUnit","load","getLastSearch","weatherDataService","UnitsButton","unit","handleUnitsChange","Header","toggleUnit","formatTemperature","Math","round","formatHumidity","formatPressure","formatWind","FavoriteButton","toggleCity","styleClass","title","isFavorite","handleClick","CurrentWeather","onServerResponse","subscribeForCurrentWeather","weatherData","iconClass","weather","id","fullName","sys","country","description","main","temp_min","temp","temp_max","wind","speed","humidity","pressure","WeatherForecastItem","mainData","details","dt_txt","ForecastItem","customCssVar","height","WeatherForecast","subscribeForForecastWeather","minMaxTemp","list","reduce","acc","min","max","Infinity","step","items","App","cmps","boxShadow","showChanges","root","targetNode","config","characterData","attributes","childList","subtree","attributeFilter","callback","mutationsList","blinkAll","toggleAll","mutationList","mutation","parentElement","style","removeAll","domList","observer","MutationObserver","observe","app","getElementById"],"mappings":"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","file":"js.d72db887.map","sourceRoot":"..\\src","sourcesContent":["export const TYPE_TEXT_NODE = 'TEXT_NODE';\r\nexport const TYPE_FRAGMENT_NODE = 'TYPE_FRAGMENT_NODE';\r\n\r\nfunction removeClass(dom) {\r\n  dom.classList.remove('div--new');\r\n}\r\n\r\nfunction blinkHtmlElemen(dom) {\r\n  dom.classList.add('div--new');\r\n  setTimeout(() => removeClass(dom), 1000);\r\n}\r\n\r\nexport function createDomElement(type = TYPE_TEXT_NODE) {\r\n  if (type === TYPE_TEXT_NODE) {\r\n    return document.createTextNode('');\r\n  }\r\n\r\n  if (type === TYPE_FRAGMENT_NODE) {\r\n    return document.createDocumentFragment();\r\n  }\r\n\r\n  if (typeof type === 'string') {\r\n    return document.createElement(type);\r\n  }\r\n\r\n  return document.createElement('div');\r\n}\r\n\r\nexport function updateClassList(dom, classList = []) {\r\n  if (dom.classList) {\r\n    blinkHtmlElemen(dom);\r\n    if (Array.isArray(classList)) {\r\n      dom.classList.add(...classList);\r\n    } else {\r\n      dom.className = classList;\r\n    }\r\n  }\r\n}\r\n\r\nexport function attachEvents(dom, eventsList = []) {\r\n  eventsList.forEach(evnt => {\r\n    dom.addEventListener(evnt.eventType, evnt.handler);\r\n  });\r\n}\r\n\r\nexport function attachAttributes(dom, attrs = {}) {\r\n  Object.keys(attrs).forEach(attrKey => {\r\n    dom.setAttribute(attrKey, attrs[attrKey]);\r\n  });\r\n}\r\n\r\nexport function removeAttributes(dom, attr = null) {\r\n  if (attr) {\r\n    dom.removeAttribute(attr);\r\n  }\r\n}\r\n","export function createElement(type, attr, ...args) {\r\n  const props = Object.assign({}, attr);\r\n\r\n  const children = [].concat(...args);\r\n  const classList = props['class'] || [];\r\n\r\n  const events = Object.keys(props)\r\n    .filter(key => key.startsWith('on'))\r\n    .map(key => {\r\n      const event = {\r\n        eventType: key.substr(2).toLowerCase(),\r\n        handler: props[key]\r\n      };\r\n\r\n      delete props[key];\r\n\r\n      return event;\r\n    });\r\n\r\n  const element = {\r\n    tag: type,\r\n    props,\r\n    classList,\r\n    children,\r\n    events\r\n  };\r\n\r\n  return element;\r\n}\r\n\r\nexport function createVDom(component = null, element, dom, children = []) {\r\n  const vDom = {\r\n    component,\r\n    element,\r\n    dom,\r\n    children\r\n  };\r\n\r\n  if (component) {\r\n    component._vDom = vDom;\r\n  }\r\n\r\n  return vDom;\r\n}\r\n","import {\r\n  TYPE_TEXT_NODE,\r\n  createDomElement,\r\n  updateClassList,\r\n  attachEvents,\r\n  attachAttributes,\r\n  removeAttributes\r\n} from './Dom';\r\nimport { createVDom } from './jsx';\r\n\r\n// createElement -> element{tag, props, classList, children, events} -> vDom{component, element, dom, children}\r\n\r\nexport default class Component {\r\n  constructor(host, props = {}) {\r\n    this.host = host;\r\n    this.props = props;\r\n    this.state = {};\r\n\r\n    this._vDom = null;\r\n    this._rendered = false;\r\n  }\r\n\r\n  setState(changes) {\r\n    this.state = Object.assign({}, this.state, changes);\r\n    this.forceRender();\r\n  }\r\n\r\n  run() {\r\n    this.beforeRender();\r\n\r\n    // this.host.innerHTML = '';\r\n    let content = this.render();\r\n\r\n    if (!Array.isArray(content)) {\r\n      content = [content];\r\n    }\r\n\r\n    if (!this._vDom) {\r\n      createVDom(this, {}, this.host);\r\n      // console.log('create empty vDom');\r\n    }\r\n\r\n    if (!this._rendered) {\r\n      this.renderChildren(content, this.host, this._vDom);\r\n      this._rendered = true;\r\n    } else {\r\n      // console.log(`update Component: ${this.constructor.name}`);\r\n      this.diffChildren(content, this._vDom.children);\r\n    }\r\n\r\n    this.afterRender();\r\n  }\r\n\r\n  renderChildren(components, parentDom, parentVDom) {\r\n    components\r\n      .filter(item => item !== null && typeof item !== 'boolean')\r\n      .map(item => this.renderVdomElement(item))\r\n      .forEach(vDom => {\r\n        parentVDom.children.push(vDom);\r\n        parentDom.append(vDom.dom);\r\n      });\r\n  }\r\n\r\n  diff(newElement, vDom) {\r\n    const { element } = vDom;\r\n\r\n    const propsKeys = [\r\n      ...Object.keys(newElement.props || {}),\r\n      ...Object.keys(element.props || {})\r\n    ];\r\n\r\n    propsKeys.forEach(key => {\r\n      if (\r\n        newElement.props.hasOwnProperty(key) &&\r\n        !element.props.hasOwnProperty(key)\r\n      ) {\r\n        // console.log('Add prop: ' + key, newElement.props[key]);\r\n        element.props[key] = newElement.props[key];\r\n      }\r\n\r\n      if (\r\n        !newElement.props.hasOwnProperty(key) &&\r\n        element.props.hasOwnProperty(key)\r\n      ) {\r\n        // console.log('Delete prop: ' + key);\r\n        delete element.props[key];\r\n      }\r\n\r\n      if (\r\n        newElement.props.hasOwnProperty(key) &&\r\n        element.props.hasOwnProperty(key) &&\r\n        typeof newElement.props[key] !== 'function' &&\r\n        newElement.props[key] !== element.props[key]\r\n      ) {\r\n        // console.log(\r\n        //   'Update prop: ' + key,\r\n        //   element.props[key],\r\n        //   newElement.props[key]\r\n        // );\r\n        element.props[key] = newElement.props[key];\r\n      }\r\n    });\r\n\r\n    vDom.component.run();\r\n  }\r\n\r\n  diffChildren(newElements, vDom) {\r\n    if (newElements.length !== vDom.length) {\r\n      this.cleanDom();\r\n      this.run();\r\n    } else {\r\n      vDom.forEach((childVDom, index) => {\r\n        const newElement = newElements[index];\r\n        const oldElement = childVDom.element;\r\n\r\n        if (newElement === null) {\r\n          childVDom.dom.remove();\r\n          vDom.splice(index, 1);\r\n          return;\r\n        }\r\n\r\n        if (typeof newElement === 'string') {\r\n          // console.log('Diff text node');\r\n          if (newElement !== oldElement) {\r\n            childVDom.dom.nodeValue = childVDom.element = newElement;\r\n          }\r\n\r\n          return;\r\n        }\r\n\r\n        if (typeof newElement.tag === 'function') {\r\n          // console.log('diff component');\r\n          this.diff(newElement, childVDom);\r\n        } else {\r\n          // console.log('diff html', newElement.tag);\r\n          if (newElement.tag !== oldElement.tag) {\r\n            // console.log('recreate html');\r\n            // TODO: recreate html\r\n          }\r\n\r\n          const propsKeys = [\r\n            ...Object.keys(newElement.props || {}),\r\n            ...Object.keys(oldElement.props || {})\r\n          ];\r\n\r\n          propsKeys.forEach(key => {\r\n            if (\r\n              newElement.props.hasOwnProperty(key) &&\r\n              !oldElement.props.hasOwnProperty(key)\r\n            ) {\r\n              // console.log('Add prop: ' + key);\r\n              attachAttributes(childVDom.dom, { [key]: newElement.props[key] });\r\n            } else if (\r\n              !newElement.props.hasOwnProperty(key) &&\r\n              oldElement.props.hasOwnProperty(key)\r\n            ) {\r\n              // console.log('Delete prop: ' + key);\r\n              removeAttributes(childVDom.dom, key);\r\n            } else if (\r\n              newElement.props.hasOwnProperty(key) &&\r\n              oldElement.props.hasOwnProperty(key) &&\r\n              typeof newElement.props[key] !== 'function' &&\r\n              newElement.props[key] !== oldElement.props[key]\r\n            ) {\r\n              // console.log('Update prop: ' + key, newElement.props[key]);\r\n              oldElement.props[key] = newElement.props[key];\r\n\r\n              if (newElement.tag === 'input' && key === 'value') {\r\n                childVDom.dom.value = newElement.props[key];\r\n              } else {\r\n                attachAttributes(childVDom.dom, {\r\n                  [key]: newElement.props[key]\r\n                });\r\n              }\r\n            }\r\n          });\r\n\r\n          this.diffChildren(newElement.children, childVDom.children);\r\n        }\r\n      });\r\n    }\r\n  }\r\n\r\n  cleanDom() {\r\n    this.host.innerHTML = '';\r\n    this._vDom.children = [];\r\n    this._rendered = false;\r\n  }\r\n\r\n  renderVdomElement(element) {\r\n    if (element instanceof HTMLElement) {\r\n      return createVDom(null, element, element);\r\n    }\r\n\r\n    if (typeof element === 'string') {\r\n      const dom = createDomElement(TYPE_TEXT_NODE);\r\n      dom.nodeValue = element;\r\n      return createVDom(null, element, dom);\r\n    }\r\n\r\n    const htmlElement = createDomElement(element.tag);\r\n    updateClassList(htmlElement, element.classList);\r\n    attachEvents(htmlElement, element.events);\r\n\r\n    if (typeof element.tag === 'function') {\r\n      const component = new element.tag(htmlElement, element.props);\r\n      const vDom = createVDom(component, element, htmlElement);\r\n      component.run();\r\n\r\n      return vDom;\r\n    }\r\n\r\n    attachAttributes(htmlElement, element.props);\r\n    const vDom = createVDom(null, element, htmlElement);\r\n    if (Array.isArray(element.children)) {\r\n      this.renderChildren(element.children, htmlElement, vDom);\r\n    }\r\n\r\n    return vDom;\r\n  }\r\n\r\n  forceRender() {\r\n    this.run();\r\n  }\r\n\r\n  beforeRender() {}\r\n\r\n  afterRender() {}\r\n\r\n  render() {\r\n    return '';\r\n  }\r\n}\r\n","const ComponentFactory = {\r\n  mappings: {},\r\n  register: componentClass => {\r\n    ComponentFactory.mappings[componentClass.name] = componentClass;\r\n  },\r\n  get: componentClassName => ComponentFactory.mappings[componentClassName]\r\n};\r\n\r\nexport default ComponentFactory;\r\n","/* eslint-disable no-cond-assign */\r\nimport ComponentFactory from './ComponentFactory';\r\nimport { createElement } from './jsx';\r\n\r\nexport function parse(tpl) {\r\n  // node = {tag, child, props }\r\n  const re = new RegExp('<[^>]+>', 'g');\r\n  let matches = null;\r\n  const lifo = [];\r\n  const all = [];\r\n  let parent;\r\n\r\n  while ((matches = re.exec(tpl)) !== null) {\r\n    const element = {\r\n      tag: '',\r\n      selfClosed: false,\r\n      customComponent: false,\r\n      children: []\r\n    };\r\n\r\n    const tag = matches[0];\r\n    element.selfClosed = tag.charAt(tag.length - 2) === '/';\r\n    const endTag = tag.charAt(1) === '/';\r\n\r\n    if (!endTag) {\r\n      element.tag = tag.match(/<(\\w+)/)[1];\r\n      element.customComponent = /^[A-Z]/.test(element.tag);\r\n    }\r\n\r\n    if (element.selfClosed) {\r\n      if (!parent) {\r\n        all.push(element);\r\n      } else {\r\n        parent.children.push(element);\r\n      }\r\n    } else if (!endTag) {\r\n      if (!parent) {\r\n        all.push(element);\r\n        parent = element;\r\n      } else {\r\n        parent.children.push(element);\r\n        parent = element;\r\n      }\r\n      lifo.push(element);\r\n    } else {\r\n      lifo.pop(element);\r\n      parent = lifo[lifo.length - 1] || null;\r\n    }\r\n\r\n    element.props = findProps(tag);\r\n\r\n    // Find any textnodes\r\n    const tagEndIndex = matches.index + tag.length;\r\n    const startNextTagIndex = tpl.indexOf('<', tagEndIndex);\r\n    if (startNextTagIndex > 0) {\r\n      const text = tpl.substring(tagEndIndex, startNextTagIndex).trim();\r\n      if (text) {\r\n        parent.children.push({\r\n          textNode: true,\r\n          content: text\r\n        });\r\n      }\r\n    }\r\n  }\r\n\r\n  return all;\r\n}\r\n\r\nfunction findProps(tpl) {\r\n  const props = {};\r\n  let prop = tpl.match(/((\\w+)=\\{([^{]+)\\})/);\r\n\r\n  while (prop) {\r\n    props[prop[2]] = prop[3];\r\n\r\n    tpl = tpl.substring(prop.index + prop[1].length);\r\n\r\n    prop = tpl.match(/((\\w+)=\\{(.+)\\})/);\r\n  }\r\n\r\n  return props;\r\n}\r\n\r\nexport function stringify(ast, fnName = 'createElement') {\r\n  const res = ast.map(element => {\r\n    if (element.textNode) {\r\n      return `'${element.content}'`;\r\n    }\r\n\r\n    const parts = [];\r\n    parts.push(`${fnName}(`);\r\n    parts.push(element.customComponent ? element.tag : `'${element.tag}'`);\r\n    parts.push(`, {`);\r\n\r\n    const props = Object.keys(element.props).map(propKey => {\r\n      return `${propKey}: ${element.props[propKey]}`;\r\n    });\r\n    parts.push(props.join(', '));\r\n\r\n    parts.push('}');\r\n    if (element.children.length > 0) {\r\n      parts.push(', ');\r\n      parts.push(stringify(element.children, fnName));\r\n    }\r\n    parts.push(')');\r\n\r\n    return parts.join('');\r\n  });\r\n\r\n  return res.join(', ');\r\n}\r\n\r\nfunction findPropsTpl(tpl, values, placeholder) {\r\n  const props = {};\r\n  let prop = tpl.match(/(([\\w-]+)=\\{([^{]+)\\})/);\r\n\r\n  while (prop) {\r\n    props[prop[2]] = prop[3] === placeholder ? values.shift() : prop[3];\r\n\r\n    tpl = tpl.substring(prop.index + prop[1].length);\r\n\r\n    prop = tpl.match(/(([\\w-]+)=\\{(.+)\\})/);\r\n  }\r\n\r\n  return props;\r\n}\r\n\r\nexport function parseTpl(tpl, values, placeholder) {\r\n  const re = new RegExp('<[^>]+>', 'g');\r\n  let matches = null;\r\n  const lifo = [];\r\n  const all = [];\r\n  let parent;\r\n\r\n  while ((matches = re.exec(tpl)) !== null) {\r\n    const element = {\r\n      tag: '',\r\n      selfClosed: false,\r\n      customComponent: false,\r\n      children: []\r\n    };\r\n\r\n    const tag = matches[0];\r\n    element.selfClosed = tag.charAt(tag.length - 2) === '/';\r\n    const endTag = tag.charAt(1) === '/';\r\n\r\n    if (!endTag) {\r\n      element.tag = tag.match(/<(\\w+)/)[1];\r\n\r\n      const customComponent = ComponentFactory.get(element.tag);\r\n      if (customComponent) {\r\n        element.customComponent = true;\r\n        element.tag = customComponent;\r\n      }\r\n    }\r\n\r\n    if (element.selfClosed) {\r\n      if (!parent) {\r\n        all.push(element);\r\n      } else {\r\n        parent.children.push(element);\r\n      }\r\n    } else if (!endTag) {\r\n      if (!parent) {\r\n        all.push(element);\r\n        parent = element;\r\n      } else {\r\n        parent.children.push(element);\r\n        parent = element;\r\n      }\r\n      lifo.push(element);\r\n    } else {\r\n      lifo.pop(element);\r\n      parent = lifo[lifo.length - 1] || null;\r\n    }\r\n\r\n    element.props = findPropsTpl(tag, values, placeholder);\r\n\r\n    // Find any textnodes\r\n    const tagEndIndex = matches.index + tag.length;\r\n    const startNextTagIndex = tpl.indexOf('<', tagEndIndex);\r\n    if (startNextTagIndex > 0) {\r\n      const text = tpl.substring(tagEndIndex, startNextTagIndex).trim();\r\n      if (text) {\r\n        parent.children.push({\r\n          textNode: true,\r\n          content: text === placeholder ? values.shift() : text\r\n        });\r\n      }\r\n    }\r\n  }\r\n\r\n  return all;\r\n}\r\n\r\nfunction buildComponents(ast) {\r\n  return ast.map(element => {\r\n    if (element.textNode) {\r\n      return element.content;\r\n    }\r\n\r\n    return createElement(\r\n      element.tag,\r\n      element.props,\r\n      ...buildComponents(element.children)\r\n    );\r\n  });\r\n}\r\n\r\nexport function parseJSX(strings, ...vars) {\r\n  const placeholder = '__tplValue__';\r\n  const fullstr = strings.join(placeholder);\r\n\r\n  const ast = parseTpl(fullstr, vars, placeholder);\r\n  return buildComponents(ast);\r\n}\r\n","import Component from '../../Framework/Component';\r\nimport { createElement } from '../../Framework/jsx';\r\nimport ComponentFactory from '../../Framework/ComponentFactory';\r\nimport { parseJSX } from '../../Framework/Template';\r\n\r\nexport default class SearchBar extends Component {\r\n  handleSearchSubmit(e) {\r\n    e.preventDefault();\r\n\r\n    const data = new FormData(e.target);\r\n\r\n    this.props.handleSearch(data.get('searchField'));\r\n  }\r\n\r\n  render() {\r\n    return parseJSX`\r\n      <form \r\n        class={search-form}\r\n        onSubmit={${e => this.handleSearchSubmit(e)}}>\r\n        <input \r\n          class={search__input} \r\n          name={searchField} \r\n          value={${this.props.cityName || ''}} />\r\n        <button class={button button--search}>Search</button>\r\n      </form>`;\r\n  }\r\n}\r\n\r\nComponentFactory.register(SearchBar);\r\n","export { default as SearchBar } from './SearchBar';\r\n","const storageKey = 'kw-favorites';\r\n\r\nclass FavoriteService {\r\n  constructor() {\r\n    this.data = JSON.parse(localStorage.getItem(storageKey)) || [];\r\n  }\r\n\r\n  removeCity(cityName) {\r\n    this.data = this.data.filter(val => {\r\n      return val !== cityName;\r\n    });\r\n    this.save();\r\n  }\r\n\r\n  addCity(cityName) {\r\n    this.data.push(cityName);\r\n    this.save();\r\n  }\r\n\r\n  toggleCity(cityName) {\r\n    if (this.data.includes(cityName)) {\r\n      this.removeCity(cityName);\r\n    } else {\r\n      this.addCity(cityName);\r\n    }\r\n  }\r\n\r\n  isFavorite(cityName) {\r\n    return this.data.includes(cityName);\r\n  }\r\n\r\n  save() {\r\n    localStorage.setItem(storageKey, JSON.stringify(this.data));\r\n    if (this.cb) {\r\n      this.cb(this.getData());\r\n    }\r\n  }\r\n\r\n  getData() {\r\n    return this.data;\r\n  }\r\n\r\n  subscribeForUpdate(cb) {\r\n    this.cb = cb;\r\n  }\r\n}\r\n\r\nexport const favoriteService = new FavoriteService();\r\n","export { favoriteService as FavoriteService } from './FavoriteService';\r\n","import Component from '../../Framework/Component';\r\nimport { FavoriteService } from '../../Services/FavoriteService';\r\nimport ComponentFactory from '../../Framework/ComponentFactory';\r\nimport { parseJSX } from '../../Framework/Template';\r\n\r\nexport default class FavouriteLocations extends Component {\r\n  constructor(host, props) {\r\n    super(host, props);\r\n\r\n    this.state = { favorites: FavoriteService.getData() };\r\n\r\n    this.onFavoritesUpdate = this.onFavoritesUpdate.bind(this);\r\n    FavoriteService.subscribeForUpdate(this.onFavoritesUpdate);\r\n  }\r\n\r\n  onFavoritesUpdate(data) {\r\n    this.setState({ favorites: data });\r\n  }\r\n\r\n  handleFavClick(e) {\r\n    if (e.target.localName === 'button') {\r\n      const button = e.target;\r\n      this.props.handleSearch(button.dataset.city);\r\n    }\r\n  }\r\n\r\n  render() {\r\n    if (this.state.favorites.lenght === 0) {\r\n      return false;\r\n    }\r\n\r\n    const buttons = this.state.favorites.map(city => {\r\n      return parseJSX`\r\n        <button data-city={${city}} class={button button--fav} type={button}>\r\n          ${city}\r\n        </button>`[0]; // parseJSX returns array of items\r\n    });\r\n\r\n    return parseJSX`\r\n      <div onClick={${e => this.handleFavClick(e)}}>\r\n        ${buttons}\r\n      </div>`;\r\n  }\r\n}\r\n\r\nComponentFactory.register(FavouriteLocations);\r\n","export { default as FavouriteLocations } from './FavouriteLocations';\r\n","class IWeatherDataService {\r\n  getCurrentWeather() {\r\n    return [];\r\n  }\r\n\r\n  getWeatherForecast() {\r\n    return [];\r\n  }\r\n\r\n  subscribeForCurrentWeather(cb) {}\r\n\r\n  subscribeForForecastWeather(cb) {}\r\n}\r\n\r\nexport default IWeatherDataService;\r\n","const API_KEY = 'fe82917089f7afb293cb0e0619603570';\r\n\r\nconst API_UNITS = 'metric';\r\nconst API_URL = '//api.openweathermap.org/data/2.5/';\r\nconst API_CURRENT = `${API_URL}weather?APPID=${API_KEY}`;\r\nconst API_FORECAST = `${API_URL}forecast?APPID=${API_KEY}`;\r\n\r\nexport function fetchData(apiUrl) {\r\n  return fetch(apiUrl)\r\n    .then(response => {\r\n      if (!response.ok) return {};\r\n      return response.json();\r\n    })\r\n    .catch(() => {});\r\n}\r\n\r\nexport function fetchCurrentData(cityName, units) {\r\n  return fetchData(`${API_CURRENT}&units=${units}&q=${cityName}`);\r\n}\r\n\r\nexport function fetchForecastData(cityName, units) {\r\n  return fetchData(`${API_FORECAST}&units=${units}&q=${cityName}`);\r\n}\r\n","import IWeatherDataService from './IWeatherDataService';\r\nimport { fetchCurrentData, fetchForecastData } from '../../api';\r\n\r\nconst API_UNITS_METRIC = 'metric';\r\nconst API_UNITS_IMPERIAL = 'imperial';\r\n\r\nclass WeatherDataService extends IWeatherDataService {\r\n  constructor() {\r\n    super();\r\n\r\n    this.dataCurrent = null;\r\n    this.dataForecast = null;\r\n    this.selectedUnit = API_UNITS_METRIC;\r\n    this.lastSearch = null;\r\n  }\r\n\r\n  load(cityName = '') {\r\n    if (cityName) {\r\n      Promise.all([\r\n        fetchCurrentData(cityName, this.selectedUnit),\r\n        fetchForecastData(cityName, this.selectedUnit)\r\n      ]).then(data => {\r\n        if (data && data[0].cod == 200) {\r\n          [this.dataCurrent, this.dataForecast] = data;\r\n          this.lastSearch = cityName;\r\n        } else {\r\n          [this.dataCurrent, this.dataForecast] = [null, null];\r\n        }\r\n\r\n        this.dataLoaded();\r\n      });\r\n    }\r\n  }\r\n\r\n  dataLoaded() {\r\n    if (this.cbCurrent) {\r\n      this.cbCurrent(this.getCurrentWeather());\r\n    }\r\n\r\n    if (this.cbForecast) {\r\n      this.cbForecast(this.getWeatherForecast());\r\n    }\r\n  }\r\n\r\n  getCurrentWeather() {\r\n    return this.dataCurrent;\r\n  }\r\n\r\n  getWeatherForecast() {\r\n    return this.dataForecast;\r\n  }\r\n\r\n  subscribeForCurrentWeather(cb) {\r\n    this.cbCurrent = cb;\r\n  }\r\n\r\n  subscribeForForecastWeather(cb) {\r\n    this.cbForecast = cb;\r\n  }\r\n\r\n  toggleUnit() {\r\n    this.selectedUnit =\r\n      this.selectedUnit === API_UNITS_METRIC\r\n        ? API_UNITS_IMPERIAL\r\n        : API_UNITS_METRIC;\r\n\r\n    if (this.cbUnitChange) {\r\n      this.cbUnitChange(this.getCurrentUnit());\r\n    }\r\n\r\n    this.load(this.getLastSearch());\r\n  }\r\n\r\n  getCurrentUnit() {\r\n    return this.selectedUnit;\r\n  }\r\n\r\n  getLastSearch() {\r\n    return this.lastSearch || '';\r\n  }\r\n}\r\n\r\nexport const weatherDataService = new WeatherDataService();\r\n","// export {\r\n//   weatherDataServiceMock as WeatherDataService\r\n// } from './WeatherDataServiceMock';\r\nexport { weatherDataService as WeatherDataService } from './WeatherDataService';\r\n","import Component from '../../Framework/Component';\r\nimport { createElement } from '../../Framework/jsx';\r\nimport ComponentFactory from '../../Framework/ComponentFactory';\r\nimport { parseJSX } from '../../Framework/Template';\r\n\r\nexport default class UnitsButton extends Component {\r\n  render() {\r\n    return parseJSX`\r\n      <label class={button-unit}>\r\n        <div class={${\r\n          this.props.unit === 'metric'\r\n            ? 'button-unit__type button-unit__type--current'\r\n            : 'button-unit__type'\r\n        }}>C</div>\r\n        <div class={${\r\n          this.props.unit === 'imperial'\r\n            ? 'button-unit__type button-unit__type--current'\r\n            : 'button-unit__type'\r\n        }}>F</div>\r\n        <input\r\n          class={visualy-hidden}\r\n          type={checkbox}\r\n          name={units}\r\n          value={}\r\n          onChange={${this.props.handleUnitsChange}}\r\n          title={} />`;\r\n  }\r\n}\r\n\r\nComponentFactory.register(UnitsButton);\r\n","export { default as UnitsButton } from './UnitsButton';\r\n","import Component from '../../Framework/Component';\r\nimport { SearchBar } from '../SearchBar';\r\nimport { FavouriteLocations } from '../FavouriteLocations';\r\nimport { WeatherDataService } from '../../Services/WeatherDataService';\r\nimport { UnitsButton } from '../UnitsButton';\r\nimport ComponentFactory from '../../Framework/ComponentFactory';\r\nimport { parseJSX } from '../../Framework/Template';\r\n\r\nexport default class Header extends Component {\r\n  constructor(host, props = {}) {\r\n    super(host, props);\r\n\r\n    this.state = {\r\n      cityName: props.cityName || '',\r\n      units: WeatherDataService.getCurrentUnit()\r\n    };\r\n  }\r\n\r\n  handleSearch(cityName) {\r\n    if (cityName) {\r\n      WeatherDataService.load(cityName);\r\n\r\n      this.setState({ cityName });\r\n    }\r\n  }\r\n\r\n  handleUnitsChange() {\r\n    WeatherDataService.toggleUnit();\r\n    this.setState({ units: WeatherDataService.getCurrentUnit() });\r\n  }\r\n\r\n  render() {\r\n    return parseJSX`\r\n      <h1>Weather App</h1>\r\n      <SearchBar \r\n        class={search} \r\n        handleSearch={${e => this.handleSearch(e)}}\r\n        cityName={${this.state.cityName}} />\r\n      <FavouriteLocations \r\n        class={fav} \r\n        handleSearch={${e => this.handleSearch(e)}} />\r\n      <UnitsButton \r\n        unit={${this.state.units}} \r\n        handleUnitsChange={${e => this.handleUnitsChange(e)}} />`;\r\n  }\r\n}\r\n\r\nComponentFactory.register(Header);\r\n","export { default as Header } from './Header';\r\n","export function formatTemperature(value) {\r\n  return `${Math.round(value)}°`;\r\n}\r\n\r\nexport function formatHumidity(value) {\r\n  return `${value}%`;\r\n}\r\n\r\nexport function formatPressure(value) {\r\n  return `${value}hPa`;\r\n}\r\n\r\nexport function formatWind(value) {\r\n  return `${value}mps`;\r\n}\r\n","import Component from '../../Framework/Component';\r\nimport { FavoriteService } from '../../Services/FavoriteService';\r\nimport { favoriteService } from '../../Services/FavoriteService/FavoriteService';\r\nimport ComponentFactory from '../../Framework/ComponentFactory';\r\nimport { parseJSX } from '../../Framework/Template';\r\n\r\nexport default class FavoriteButton extends Component {\r\n  handleClick() {\r\n    favoriteService.toggleCity(this.props.name);\r\n    this.run();\r\n  }\r\n\r\n  render() {\r\n    let styleClass = 'button-fav far fa-star';\r\n    let title = 'Add favorite';\r\n\r\n    if (favoriteService.isFavorite(this.props.name)) {\r\n      styleClass = 'button-fav fas fa-star';\r\n      title = 'Remove favorite';\r\n    }\r\n\r\n    return parseJSX`\r\n      <button\r\n        class={${styleClass}}\r\n        title={${title}}\r\n        onClick={${() => this.handleClick()}}\r\n        type={button}\r\n      ></button>`;\r\n  }\r\n}\r\n\r\nComponentFactory.register(FavoriteButton);\r\n","export { default as FavoriteButton } from './FavoriteButton';\r\n","/* eslint-disable class-methods-use-this */\r\nimport Component from '../../Framework/Component';\r\nimport { WeatherDataService } from '../../Services/WeatherDataService';\r\nimport {\r\n  formatTemperature,\r\n  formatHumidity,\r\n  formatPressure,\r\n  formatWind\r\n} from '../../formatters';\r\nimport { FavoriteButton } from '../FavoriteButton';\r\nimport ComponentFactory from '../../Framework/ComponentFactory';\r\nimport { parseJSX } from '../../Framework/Template';\r\n\r\nexport default class CurrentWeather extends Component {\r\n  constructor(host, props) {\r\n    super(host, props);\r\n    this.state = { data: null };\r\n\r\n    this.onServerResponse = this.onServerResponse.bind(this);\r\n    WeatherDataService.subscribeForCurrentWeather(this.onServerResponse);\r\n  }\r\n\r\n  onServerResponse(weatherData) {\r\n    this.setState({ data: weatherData });\r\n  }\r\n\r\n  render() {\r\n    if (!this.state.data) {\r\n      return false;\r\n    }\r\n\r\n    const iconClass = `owf owf-${\r\n      this.state.data.weather[0].id\r\n    } current-weather-icon`;\r\n\r\n    const fullName = `${this.state.data.name},${this.state.data.sys.country}`;\r\n\r\n    return parseJSX`\r\n        <div class={main weather-details}>\r\n          <div class={weather-icon}>\r\n            <FavoriteButton name={${fullName}} />\r\n            <h2>${this.state.data.name}</h2>\r\n            <i \r\n              class={${iconClass}}\r\n              title={${this.state.data.weather[0].description}}></i>\r\n          </div>\r\n          <div>\r\n            <div class={row data-details}>\r\n              <div class={aux-temperature}>\r\n                <i class={fas fa-arrow-circle-down}></i>${formatTemperature(\r\n                  this.state.data.main.temp_min\r\n                )}\r\n              </div>\r\n              <div class={main-temperature}>\r\n                ${formatTemperature(this.state.data.main.temp)}\r\n              </div>\r\n              <div class={aux-temperature}>\r\n                <i class={fas fa-arrow-circle-up}></i>\r\n                ${formatTemperature(this.state.data.main.temp_max)}\r\n              </div>\r\n            </div>\r\n          </div>\r\n          <ul class={row data-details data-details--sub}>\r\n            <li title={Wind}>\r\n              <i class={fas fa-wind}></i>\r\n              ${formatWind(this.state.data.wind.speed)}\r\n            </li>\r\n            <li title={Humidity}>\r\n              <i class={fas fa-tint}></i>\r\n              ${formatHumidity(this.state.data.main.humidity)}\r\n            </li>\r\n            <li title={Pressure}>\r\n              <i class={fas fa-weight-hanging}></i>\r\n              ${formatPressure(this.state.data.main.pressure)}\r\n            </li>\r\n          </ul>\r\n        </div>\r\n      </div>`;\r\n  }\r\n}\r\n\r\nComponentFactory.register(CurrentWeather);\r\n","export { default as CurrentWeather } from './CurrentWeather';\r\n","import Component from '../../Framework/Component';\r\nimport { createElement } from '../../Framework/jsx';\r\nimport ComponentFactory from '../../Framework/ComponentFactory';\r\n\r\nexport default class WeatherForecastItem extends Component {\r\n  render() {\r\n    const mainData = this.props.data.main;\r\n\r\n    const details = Object.keys(mainData).map(key => {\r\n      return createElement('li', {}, `${key}: ${mainData[key]}`);\r\n    });\r\n\r\n    return createElement(\r\n      'div',\r\n      {},\r\n      this.props.data.dt_txt,\r\n      createElement('ul', {}, details)\r\n    );\r\n  }\r\n}\r\n\r\nComponentFactory.register(WeatherForecastItem);\r\n","export { default as WeatherForecastItem } from './WeatherForecastItem';\r\n","import Component from '../../Framework/Component';\r\nimport { formatTemperature } from '../../formatters';\r\nimport ComponentFactory from '../../Framework/ComponentFactory';\r\nimport { parseJSX } from '../../Framework/Template';\r\n\r\nexport default class ForecastItem extends Component {\r\n  render() {\r\n    const customCssVar = `--height:${this.props.height}%`;\r\n\r\n    return parseJSX`\r\n      <div\r\n        class={forecast__column}\r\n        data-temp={${this.props.temp}}\r\n        data-height={${this.props.height}}\r\n        style={${customCssVar}}\r\n        title={${formatTemperature(this.props.temp)}}\r\n      ></div>`;\r\n  }\r\n}\r\n\r\nComponentFactory.register(ForecastItem);\r\n","export { default as ForecastItem } from './ForecastItem';\r\n","import Component from '../../Framework/Component';\r\nimport { createElement } from '../../Framework/jsx';\r\nimport { WeatherDataService } from '../../Services/WeatherDataService';\r\nimport { WeatherForecastItem } from '../WeatherForecastItem';\r\nimport { ForecastItem } from '../ForecastItem';\r\nimport ComponentFactory from '../../Framework/ComponentFactory';\r\nimport { parseJSX } from '../../Framework/Template';\r\n\r\nexport default class WeatherForecast extends Component {\r\n  constructor(host, props) {\r\n    super(host, props);\r\n    this.state = {};\r\n\r\n    this.onServerResponse = this.onServerResponse.bind(this);\r\n    WeatherDataService.subscribeForForecastWeather(this.onServerResponse);\r\n  }\r\n\r\n  onServerResponse(weatherData) {\r\n    this.setState({ data: weatherData });\r\n  }\r\n\r\n  render() {\r\n    if (!this.state.data) return null;\r\n\r\n    const minMaxTemp = this.state.data.list.reduce(\r\n      (acc, item) => {\r\n        return {\r\n          min: Math.min(item.main.temp_min, acc.min),\r\n          max: Math.max(item.main.temp_max, acc.max)\r\n        };\r\n      },\r\n      { min: Infinity, max: -Infinity }\r\n    );\r\n\r\n    minMaxTemp.min -= 1;\r\n    minMaxTemp.max += 1;\r\n\r\n    const step = (minMaxTemp.max - minMaxTemp.min) / 100;\r\n\r\n    const items = this.state.data.list.map(item => {\r\n      const height = (item.main.temp - minMaxTemp.min) / step;\r\n      return parseJSX`\r\n        <ForecastItem temp={${item.main.temp}} height={${height}} />`[0]; // TODO: fix\r\n    });\r\n\r\n    return parseJSX`<div class={forecast-grid}>${items}</div>`;\r\n  }\r\n}\r\n\r\nComponentFactory.register(WeatherForecast);\r\n","export { default as WeatherForecast } from './WeatherForecast';\r\n","import Component from '../../Framework/Component';\r\nimport { Header } from '../Header';\r\nimport { CurrentWeather } from '../CurrentWeather';\r\nimport { WeatherForecast } from '../WeatherForecast';\r\nimport ComponentFactory from '../../Framework/ComponentFactory';\r\nimport { parseJSX } from '../../Framework/Template';\r\n\r\nexport default class App extends Component {\r\n  render() {\r\n    const cmps = [Header, CurrentWeather, WeatherForecast];\r\n\r\n    return parseJSX`\r\n      <div class={app}>\r\n        <Header class={header} />\r\n        <CurrentWeather />\r\n        <WeatherForecast class={forecast} />\r\n      </div>`;\r\n  }\r\n}\r\n\r\nComponentFactory.register(App);\r\n","export { default as App } from './App';\r\n","const boxShadow = '0 0 5px 2px red';\r\n\r\nexport function showChanges(root) {\r\n  const targetNode = root;\r\n  const config = {\r\n    characterData: true,\r\n    attributes: true,\r\n    childList: false,\r\n    subtree: true,\r\n    attributeFilter: ['class', 'value', 'data-height', 'data-temp', 'title']\r\n  };\r\n\r\n  function callback(mutationsList) {\r\n    blinkAll(mutationsList);\r\n  }\r\n\r\n  function toggleAll(mutationList) {\r\n    mutationList.forEach(mutation => {\r\n      const dom =\r\n        mutation.type === 'characterData'\r\n          ? mutation.target.parentElement\r\n          : mutation.target;\r\n\r\n      dom.style.boxShadow = boxShadow;\r\n    });\r\n  }\r\n\r\n  function removeAll(mutationList) {\r\n    mutationList.forEach(mutation => {\r\n      const dom =\r\n        mutation.type === 'characterData'\r\n          ? mutation.target.parentElement\r\n          : mutation.target;\r\n\r\n      dom.style.boxShadow = '';\r\n    });\r\n  }\r\n\r\n  function blinkAll(domList) {\r\n    toggleAll(domList);\r\n\r\n    setTimeout(function() {\r\n      removeAll(domList);\r\n    }, 500);\r\n  }\r\n\r\n  const observer = new MutationObserver(callback);\r\n  observer.observe(targetNode, config);\r\n}\r\n","import { App } from './Components/App';\r\nimport { showChanges } from './devHelpers';\r\n\r\nconst app = new App(document.getElementById('app'));\r\napp.run();\r\n\r\nshowChanges(document.getElementById('app'));\r\n"]}